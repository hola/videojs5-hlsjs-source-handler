!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.HolaProviderHLS=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){function c(){"Hlsjs"==y.techName_&&b.hls_&&(b.hls_.destroy(),b.hls_=null),b.hlsHandler&&b.hlsHandler.dispose(),b.hlsHandler={dispose:function(){},isLive:function(){return v==1/0}}}function d(a,b){s&&s.holaLog&&s.holaLog[a]&&s.holaLog[a].call(s.holaLog,b)}function f(){var a,c={};Object.assign(c,e),Object.assign(c,k.hls_params),void 0!==c.debug&&(a=c.debug),c.debug={},["debug","info","log","warn","error"].forEach(function(a){c.debug[a]=d.bind(null,a)}),b.hls_obj=s=new g.Hls(g.videojs.mergeOptions(b.options_.hlsjsConfig,c)),s.holaLog=a,s.manual_level=-1,s.on(g.Hls.Events.ERROR,function(a,c){l(a,c,b,u)}),s.on(g.Hls.Events.LEVEL_SWITCH,q),s.on(g.Hls.Events.LEVEL_LOADED,function(a,b){v=b.details.live?1/0:b.details.totalduration}),s.on(g.Hls.Events.LEVEL_UPDATED,function(a,b){w=b.details.live?b.details.fragments[0].start:0,x=b.details.live?s.streamController.computeLivePosition(w,b.details):b.details.totalduration}),s.on(g.Hls.Events.FRAG_PARSING_METADATA,function(a,c){b.trigger("parsedmetadata",c)}),s.attachMedia(t),t.addEventListener("waiting",r)}function h(a){s.loadSource(a.src)}function i(a){s.manual_level=a,s.hola_adaptive?y.trigger("mediachange"):s.loadLevel=a,q()}function j(a){1===u[g.Hls.ErrorTypes.MEDIA_ERROR]?s.recoverMediaError():2===u[g.Hls.ErrorTypes.MEDIA_ERROR]?(s.swapAudioCodec(),s.recoverMediaError()):u[g.Hls.ErrorTypes.MEDIA_ERROR]>2&&(a.code=3,b.error=function(){return a},b.trigger("error"))}function l(a,c){var d="error",e={message:"HLS.js error: "+c.type+" - fatal: "+c.fatal+" - "+c.details};if(c.fatal||c.details!==g.Hls.ErrorDetails.BUFFER_STALLED_ERROR||(d="warn"),u[c.type]?u[c.type]+=1:u[c.type]=1,c.fatal)switch(c.type){case g.Hls.ErrorTypes.NETWORK_ERROR:e.code=2,b.error=function(){return e},b.trigger("error");break;case g.Hls.ErrorTypes.MEDIA_ERROR:j(e);break;default:s.destroy(),b.error=function(){return e},b.trigger("error")}}function m(a){if(void 0===a)return"";if(!a)return"0";var b=1024,c=["","K","M","G","T","P"],d=Math.floor(Math.log(a)/Math.log(b));if(a/=Math.pow(b,d),a<.001)return"0";a>=b-1&&(a=Math.trunc(a));var e=a.toFixed(a<1?3:a<10?2:a<100?1:0);return e.replace(/\.0*$/,"")+c[d]}function n(a){var b=a.height||Math.round(9*a.width/16);return b?b+"p":""}function o(a){return a.bitrate?m(a.bitrate)+"bps":""}function p(a,b){var c=n(a);if(!c)return o(a);var d=b.some(function(b){return b!=a&&n(b)==c});return d?c+" "+o(a):c}function q(){var a=[],c=s.levels;c.length>1&&a.push({id:-1,label:"Auto"}),c.forEach(function(b,d){a.push({id:d,label:p(b,c)})}),b.trigger("loadedqualitydata",{quality:{list:a,selected:s.manual_level,current:s.loadLevel},callback:i})}function r(){z||h(a),t.removeEventListener("waiting",r)}b.name_="holaHLS";var s,t=b.el(),u={},v=null,w=0,x=0,y=t.player||t.parentNode.player||g.videojs.getPlayers()[t.playerId],z="none"!=y.options().preload;t.addEventListener("error",function(a){var b,c=a.currentTarget.error;switch(c.code){case c.MEDIA_ERR_ABORTED:b="You aborted the video playback";break;case c.MEDIA_ERR_DECODE:b="The video playback was aborted due to a corruption problem or because the video used features your browser did not support",j(c);break;case c.MEDIA_ERR_NETWORK:b="A network error caused the video download to fail part-way";break;case c.MEDIA_ERR_SRC_NOT_SUPPORTED:b="The video could not be loaded, either because the server or network failed or because the format is not supported"}}),this.duration=function(){return v||t.duration||0},this.seekable=function(){return g.videojs.createTimeRanges([[w,x]])},this.dispose=function(){t.removeEventListener("waiting",r),s.destroy()},c(),f(),z&&h(a)}var e,f,g=b.exports;try{f=window.localStorage}catch(h){}var i=!1,j=!1;g.Hls=window.Hls,g.videojs=window.videojs,g.VERSION="0.0.8-45",g.name="HolaProviderHLS";var k=function(){function a(a,b){if(!a||"object"!=typeof a||1!=Object.keys(a).length)return a;if(a.__Function__&&b.func)return new Function("",'"use strict";return ('+a.__Function__+");")();if(a.__RegExp__&&b.re){var c=/^\/(.*)\/(\w*)$/.exec(a.__RegExp__);if(!c)throw new Error("failed parsing regexp");return new RegExp(c[1],c[2])}return a}function b(c,d){if(!c||"object"!=typeof c)return c;if(Array.isArray(c)){for(var e=0;e<c.length;e++)c[e]=b(c[e],d);return c}var f=a(c,d);if(f!==c)return f;for(var g in c)c[g]=b(c[g],d);return c}var c={register:"register-percent",manual_init:"manual-init"},d=document.currentScript||document.querySelector("#hola_videojs_hls_provider");if(!d)return{};var e="{[=it.HOLA_REGISTER_PERCENT]}";if(!e.indexOf("{[")){if(!d.hasAttribute(c.register))return{};e=+d.getAttribute(c.register)}if(isNaN(e)||e<0||e>100)return{disabled:!0};var g=!1;if(g&&(e=100),window.location.search&&window.URLSearchParams){var h=new window.URLSearchParams(window.location.search);e=+h.get("hola_provider_register_percent")||e}f&&f.getItem("hola_provider_register_percent")&&(e=+f.getItem("hola_provider_register_percent"));var i=!g&&!d.hasAttribute(c.manual_init),j="{[=it.HOLA_HLS_PARAMS]}",k={};try{k=b(JSON.parse(j),{func:!0,re:!0})}catch(l){}return{autoinit:i,hls_params:k,disabled:!e||100*Math.random()>e}}();g.attach=function(a,b,c,f){if(c&&(g.Hls=c),b&&(g.videojs=b),f&&(e=f),i)j=!1;else if(g.Hls.isSupported()){i=!0,j=!1;var h=["Hlsjs","Html5"].filter(function(a){if(a=g.videojs.getTech(a)){a.sourceHandlers instanceof Array?a.sourceHandlers.splice(0,0,g):a.registerSourceHandler(g,0);var b=a.registerSourceHandler;return a.registerSourceHandler=function(c,d){return b.call(a,c,0===d?1:d)},!0}});g.videojs.HolaProviderHLS=d,h.length}},g.detach=function(){j=!0},g.canPlayType=function(a){return j?"":/^application\/x-mpegURL$/i.test(a)?"probably":""},g.canHandleSource=function(a){var b;return j?"":(b=g.canPlayType(a.type))?b:/\.m3u8/i.test(a.src)?"maybe":""},g.handleSource=function(a,b){return b.hlsProvider&&b.hlsProvider.dispose(),b.hlsProvider=new d(a,b)},k.disabled?g.attach=g.detach=function(){}:k.autoinit&&g.attach()},{}]},{},[1])(1)});